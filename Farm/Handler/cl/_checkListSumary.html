
<div id="tbChkLstHeader">
    <a href="#" id="dgSearch" class="easyui-linkbutton" onclick="mySearch()" data-options="iconCls:'icon-search',plain:true">查找</a>
    <a href="#" id="dgExport" class="easyui-linkbutton" onclick="exportExcel()" data-options="iconCls:'icon-export',plain:true">导出excel</a>
</div>
<table id="dgChkLstHeader" style="height:100%" rownumbers="true" toolbar="#tbChkLstHeader">
    <thead>
        <tr>
            <th data-options="field:'ChkListId'" hidden="hidden">ID</th>
            <th data-options="field:'ChkListNo', formatter: ReturnChkDtl" width="140" editor="text">检查表编号</th>
            <th data-options="field:'ChkListDesc',align:'left'" width="140" editor="text">检查表说明</th>
            <th data-options="field:'OrganizeCode'" width="80" editor="text">组织代码</th>
            <th data-options="field:'OrganizeName'" width="80" editor="text">组织名称</th>
            <th data-options="field:'CheckDate'" width="120" editor="text">检查日期</th>
            <th data-options="field:'CheckerCode'" hidden="hidden">检查人编号</th>
            <th data-options="field:'CheckerOrgCode'" hidden="hidden">检查人组织</th>
            <th data-options="field:'Checker'">检查人</th>
            <th data-options="field:'OrgHead'">被检单位领导</th>
            <th data-options="field:'HostName'">接待人</th>
            <th data-options="field:'GRemark'">总评</th>
            <th data-options="field:'Line'">条线</th>
            <th data-options="field:'IsEnable',align:'center',formatter:ReturnYN,editor:{type:'checkbox',options:{on:1,off:0}}" width="40" hidden="hidden">有效</th>
            <th data-options="field:'IsDel',align:'center',formatter:ReturnYN,editor:{type:'checkbox',options:{on:1,off:0}}" width="40" hidden="hidden">已删除</th>
            <th data-options="field:'CreatePerson'">创建人</th>
            <th data-options="field:'CreateDate'">创建日期</th>
            <th data-options="field:'UpdatePerson'" hidden="hidden">更新人</th>
            <th data-options="field:'UpdateDate'" hidden="hidden">更新日期</th>
        </tr>
    </thead>
</table>

<script>
  //  $(document).ready(function () {

        $("#dgChkLstHeader").datagrid({
            singleSelect: true,
            idField: 'ChkListId',
            view: scrollview,
            pageSize: 20,
            url: 'Handler/Login.ashx?action=gridCheckList'
        });

 //   });


    var myDG = $('#dgChkLstHeader');
    var saveUrl = "/Handler/cl/CheckListTemp.ashx?action=SaveItem"
    function ReturnChkDtl(value, row, index) {
        return '<a style="color:blue" onclick="getChkList(' + row.ChkListId + ')" href="#">' + row.ChkListNo + '</a>';
    }
    function getChkList(ChkListId) {
        //        var url = 'Handler/Login.ash?action=updateChkListDtl&id=' + ChkListId
        var url = '/Handler/cl/_checkListNew'
        myPageId = ChkListId;
        addTab("检查表修改界面-" + ChkListId, url)
    }
</script>
